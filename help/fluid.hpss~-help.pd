#N canvas 28 35 691 995 12;
#X text 18 91 Harmonic-Percussive Source Separation (HPSS) on the an audio input., f 69;
#X obj 511 199 array define hpss_drums;
#X text 432 386 size of 'harmonic' median filter (in hops). Bigger = more latency, f 32;
#X text 435 504 size of 'percussive' median filter (in spectral bins), f 34;
#X obj 17 13 cnv 15 660 42 empty empty fluid.hpss~ 1 22 0 36 #4ba3fb #ffffff 0;
#X obj 17 60 cnv 15 488 17 empty empty Harmonic-Percussive\ Source\ Separation\ Using\ Median\ Filtering 4 8 0 13 #e0e0e0 #404040 0;
#X obj 509 60 fluid.referencelauncher fluid.hpss~.html reference/hpss/;
#X obj 27 780 cnv 15 380 44 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X obj 238 825 *~;
#X obj 256 804 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 337 825 *~;
#X obj 355 804 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 318 321 loadbang;
#X msg 395 417 harmfiltersize \$1 \, getlatency;
#X floatatom 395 396 5 3 17 0 - - - 0;
#X floatatom 395 515 5 3 31 0 - - - 0;
#X msg 395 536 percfiltersize \$1 \, getlatency;
#X msg 318 611 maskingmode 0 \, getlatency;
#X obj 17 955 fluid.out~ hpsshelp;
#X obj 17 199 fluid.demosound~;
#X text 273 801 harmonic;
#X text 373 801 perc;
#X obj 17 181 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X obj 238 647 fluid.hpss~, f 43;
#X obj 17 720 delread~ \$0-latencycomp 1, f 19;
#X obj 17 693 expr $f1*1000/samplerate;
#X floatatom 536 673 5 0 0 0 - - - 0;
#X text 580 677 LATENCY;
#X obj 17 647 delwrite~ \$0-latencycomp 1000, f 20;
#X obj 17 855 *~;
#X obj 35 804 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X text 51 802 source;
#X msg 140 396 getlatency;
#X text 17 179 2) Play a sound;
#X obj 523 867 cnv 15 152 65 empty empty More\ information 4 10 0 13 #e0e0e0 #404040 0;
#N canvas 511 25 694 792 masking_mode1 0;
#X text 16 67 use mode 1 for more extreme separation;
#X obj 36 682 list trim;
#X text 276 612 harmthresh and percthresh are two frequency-amplitude pairs. frequency is normalised (0-1) \, amp in dB, f 53;
#X obj 17 13 cnv 15 660 42 empty empty fluid.hpss~ 1 22 0 36 #4ba3fb #ffffff 0;
#X text 16 91 in mode 0 \, fluid.hpss~ uses a soft-masking approach that produces smooth results \, at the cost of how separated they are., f 93;
#X text 16 129 In modes 1 and 2 \, a binary mask is used instead \, where a component is designated as being harmonic or percussive if the respective median filter output exceeds some threshold. This yields greater separation \, but can have more audible artefacts., f 93;
#X obj 17 249 fluid.demosound~;
#X obj 27 348 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X obj 18 925 *~;
#X obj 36 904 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 117 925 *~;
#X obj 135 904 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 17 980 fluid.out~ hpsshelp;
#X text 53 901 harmonic;
#X text 151 900 perc;
#N canvas 282 71 1390 1006 calculatethreshold 0;
#X floatatom 66 435 5 0 0 0 - - - 0;
#X obj 98 479 s nf1;
#X obj 70 500 value nf1;
#X floatatom 166 381 5 0 0 0 - - - 0;
#X text 104 434 nf1;
#X text 204 380 a1;
#X obj 202 479 s a1;
#X obj 173 500 value a1;
#X floatatom 256 435 5 0 0 0 - - - 0;
#X floatatom 356 381 5 0 0 0 - - - 0;
#X text 295 434 nf2;
#X text 402 380 a2;
#N canvas 0 22 450 278 (subpatch) 0;
#X array help.hpss.mode.1 128 float 0;
#X coords 0 60 127 -60 200 140 2 0 0;
#X restore 100 100 graph;
#X obj 496 223 t f f, f 71;
#X obj 496 285 moses;
#X obj 528 254 r nf1;
#X obj 897 325 moses;
#X obj 929 297 r nf2;
#X obj 496 484 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 496 509 value a1;
#X obj 929 484 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 928 509 value a2;
#X obj 391 479 s a2;
#X obj 363 500 value a2;
#X obj 266 500 value nf2;
#X msg 629 -53 \; bob const;
#X obj 294 479 s nf2;
#X floatatom 621 509 5 0 0 0 - - - 0;
#X obj 621 460 expr a1+(($f1-nf1)*((a2-a1)/(nf2-nf1)));
#X floatatom 106 277 5 0 20000 1 - - - 12;
#X floatatom 146 277 5 -50 50 1 - - - 12;
#X floatatom 216 277 5 0 20000 1 - - - 12;
#X floatatom 256 277 5 -50 50 1 - - - 12;
#X obj -37 131 loadbang;
#X msg -37 182 112.47;
#X msg 19 182 3556.56;
#X obj 496 575 tabwrite help.hpss.mode.1, f 71;
#X obj 4 345 s redraw;
#X text 214 243 highershelf;
#X text 254 261 dB;
#X text 214 261 Hz;
#X text 144 261 dB;
#X text 104 261 Hz;
#X text 102 243 lower shelf;
#X floatatom 168 680 6 0 0 0 - - - 0;
#X floatatom 286 680 6 0 0 0 - - - 0;
#X floatatom 227 680 6 0 0 0 - - - 0;
#X floatatom 345 680 6 0 0 0 - - - 0;
#X text 171 663 Hz;
#X text 289 664 Hz;
#X text 230 662 dB;
#X text 348 663 dB;
#N canvas 780 23 1268 771 makelist 0;
#X obj 403 333 t b f;
#X obj 318 333 t b f;
#X obj 489 333 t b f;
#X obj 265 456 list prepend harmthresh;
#X obj 265 381 pack f 0 f 0, f 37;
#X obj 264 67 inlet;
#X obj 318 67 inlet;
#X obj 403 67 inlet;
#X obj 489 67 inlet;
#X obj 265 505 outlet;
#X obj 122 170 inlet;
#X obj 122 200 t b f;
#X obj 569 290 sel 0 1;
#X msg 569 378 symbol harmthresh;
#X msg 592 356 symbol percthresh;
#X obj 264 163 expr $f1/(samplerate/2), f 25;
#X obj 403 190 expr $f1/(samplerate/2), f 25;
#X connect 0 0 4 0;
#X connect 0 1 4 2;
#X connect 1 0 4 0;
#X connect 1 1 4 1;
#X connect 2 0 4 0;
#X connect 2 1 4 3;
#X connect 3 0 9 0;
#X connect 4 0 3 0;
#X connect 5 0 15 0;
#X connect 6 0 1 0;
#X connect 7 0 16 0;
#X connect 8 0 2 0;
#X connect 10 0 11 0;
#X connect 11 0 4 0;
#X connect 11 1 12 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 13 0 3 1;
#X connect 14 0 3 1;
#X connect 15 0 4 0;
#X connect 16 0 0 0;
#X restore 110 714 pd makelist;
#X f 34;
#X obj 111 677 vradio 15 1 0 2 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0;
#X text 34 689 percthresh;
#X text 34 677 harmthresh;
#N canvas 126 -975 297 579 count128 0;
#X obj 85 256 until;
#X obj 85 339 f;
#X obj 134 276 + 1;
#X obj 85 220 t f f;
#X floatatom 85 193 5 0 0 0 - - - 0;
#X floatatom 85 398 5 0 0 0 - - - 0;
#X obj 85 86 r redraw;
#X obj 85 437 outlet;
#X msg 85 154 128;
#X obj 134 301 mod 128;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 5 0;
#X connect 2 0 9 0;
#X connect 3 0 0 0;
#X connect 3 1 9 1;
#X connect 4 0 3 0;
#X connect 5 0 7 0;
#X connect 6 0 8 0;
#X connect 8 0 4 0;
#X connect 9 0 1 1;
#X restore 496 194 pd count128;
#X floatatom 564 285 5 0 0 0 - - - 0;
#X floatatom 522 543 5 0 0 0 - - - 0;
#X floatatom 940 537 5 0 0 0 - - - 0;
#X floatatom 959 328 5 0 0 0 - - - 0;
#X obj 66 381 ftom;
#X obj 256 381 ftom;
#X obj 110 752 outlet;
#X msg 1 33 \; help.hpss.mode.1 edit 0;
#X obj 260 315 t b f;
#X obj 201 312 t b f;
#X obj 144 315 t b f;
#X obj 85 310 t b f;
#X connect 0 0 2 0;
#X connect 0 0 1 0;
#X connect 3 0 7 0;
#X connect 3 0 6 0;
#X connect 8 0 24 0;
#X connect 8 0 26 0;
#X connect 9 0 23 0;
#X connect 9 0 22 0;
#X connect 13 0 14 0;
#X connect 13 1 36 1;
#X connect 14 0 18 0;
#X connect 14 1 16 0;
#X connect 15 0 14 1;
#X connect 15 0 57 0;
#X connect 16 0 28 0;
#X connect 16 1 20 0;
#X connect 17 0 16 1;
#X connect 17 0 60 0;
#X connect 18 0 19 0;
#X connect 19 0 36 0;
#X connect 19 0 58 0;
#X connect 20 0 21 0;
#X connect 21 0 36 0;
#X connect 21 0 59 0;
#X connect 27 0 36 0;
#X connect 28 0 27 0;
#X connect 29 0 68 0;
#X connect 30 0 67 0;
#X connect 31 0 66 0;
#X connect 32 0 65 0;
#X connect 33 0 34 0;
#X connect 33 0 35 0;
#X connect 33 0 64 0;
#X connect 34 0 29 0;
#X connect 35 0 31 0;
#X connect 44 0 52 1;
#X connect 45 0 52 3;
#X connect 46 0 52 2;
#X connect 47 0 52 4;
#X connect 52 0 63 0;
#X connect 53 0 52 0;
#X connect 56 0 13 0;
#X connect 61 0 0 0;
#X connect 62 0 8 0;
#X connect 65 0 37 0;
#X connect 65 1 9 0;
#X connect 65 1 47 0;
#X connect 66 0 37 0;
#X connect 66 1 62 0;
#X connect 66 1 45 0;
#X connect 67 0 37 0;
#X connect 67 1 3 0;
#X connect 67 1 46 0;
#X connect 68 0 37 0;
#X connect 68 1 61 0;
#X connect 68 1 44 0;
#X coords 0 -1 1 1 200 200 2 100 100;
#X restore 434 309 pd calculatethreshold;
#X msg 252 769 harmfiltersize \$1 \, getlatency, f 18;
#X floatatom 252 748 5 3 17 0 - - - 0;
#X floatatom 400 748 5 3 31 0 - - - 0;
#X msg 400 769 percfiltersize \$1 \, getlatency, f 21;
#X msg 252 726 3;
#X msg 400 726 31;
#X obj 252 700 loadbang;
#X obj 157 488 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X obj 195 903 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X listbox 278 594 40 0 0 0 - - - 0;
#X obj 18 871 fluid.hpss~ -maskingmode 1, f 43;
#X obj 85 987 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X text 85 985 1) Turn audio on;
#X text 30 348 2) Play a sound;
#X text 157 486 3) modify the frequency threshold ->>;
#X text 197 900 4) select which component or components to hear;
#X text 16 181 fluid.hpss~ lets you adjust this threshold with respect to frequency \, to enable fine-tuning. In mode 1 \, just use the harmthresh attribute \, which will internally make a complementary threshold for the percussive part – guaranteeing that the two components still sum to the source., f 93;
#X connect 1 0 26 0;
#X connect 6 0 26 0;
#X connect 8 0 12 0;
#X connect 8 0 12 1;
#X connect 9 0 8 1;
#X connect 10 0 12 0;
#X connect 10 0 12 1;
#X connect 11 0 10 1;
#X connect 15 0 1 0;
#X connect 15 0 25 0;
#X connect 16 0 26 0;
#X connect 17 0 16 0;
#X connect 18 0 19 0;
#X connect 19 0 26 0;
#X connect 20 0 17 0;
#X connect 21 0 18 0;
#X connect 22 0 20 0;
#X connect 22 0 21 0;
#X connect 26 0 8 0;
#X connect 26 1 10 0;
#X restore 526 887 pd masking_mode1;
#N canvas 335 25 701 792 masking_mode2 0;
#X text 281 607 harmthresh and percthresh are two frequency-amplitude pairs. frequency is normalised (0-1) \, amp in dB, f 53;
#X obj 17 13 cnv 15 660 42 empty empty fluid.hpss~ 1 22 0 36 #4ba3fb #ffffff 0;
#X obj 18 894 fluid.out~ hpsshelp;
#X obj 17 249 fluid.demosound~;
#X obj 17 231 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X obj 18 793 *~;
#X obj 36 772 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 142 793 *~;
#X obj 160 772 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X text 53 771 harmonic;
#X text 176 771 perc;
#X obj 18 739 fluid.hpss~ -maskingmode 2 -fftsettings 4096 1024 4096;
#X obj 268 793 *~;
#X obj 286 772 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#N canvas 845 23 1203 930 calculatethreshold 0;
#X floatatom 66 435 5 0 0 0 - - - 0;
#X floatatom 166 381 5 0 0 0 - - - 0;
#X text 104 434 nf1;
#X text 204 380 a1;
#X floatatom 256 435 5 0 0 0 - - - 0;
#X floatatom 356 381 5 0 0 0 - - - 0;
#X text 295 434 nf2;
#X text 402 380 a2;
#N canvas 0 22 450 278 (subpatch) 0;
#X array help.hpss.mode.2.a 128 float 0;
#X coords 0 60 127 -60 200 140 2 0 0;
#X restore 100 100 graph;
#X obj 496 223 t f f, f 71;
#X obj 496 285 moses;
#X obj 897 325 moses;
#X obj 496 484 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 929 484 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X floatatom 621 509 5 0 0 0 - - - 0;
#X floatatom 106 277 5 0 20000 1 - - - 12;
#X floatatom 146 277 5 -50 50 1 - - - 12;
#X floatatom 216 277 5 0 20000 1 - - - 12;
#X floatatom 256 277 5 -50 50 1 - - - 12;
#X obj -37 131 loadbang;
#X msg -37 182 112.47;
#X msg 19 182 3556.56;
#X text 214 243 highershelf;
#X text 254 261 dB;
#X text 214 261 Hz;
#X text 144 261 dB;
#X text 104 261 Hz;
#X text 102 243 lower shelf;
#X obj 98 479 s nf01;
#X obj 70 500 value nf01;
#X obj 173 500 value a01;
#X obj 202 479 s a01;
#X obj 294 479 s nf02;
#X obj 266 500 value nf02;
#X obj 363 500 value a02;
#X obj 391 479 s a02;
#X obj 496 509 value a01;
#X obj 928 509 value a02;
#X obj 621 460 expr a01+(($f1-nf01)*((a02-a01)/(nf02-nf01)));
#X obj 929 297 r nf02;
#X obj 528 254 r nf01;
#X obj -28 360 s redraw2;
#X obj 496 575 tabwrite help.hpss.mode.2.a, f 71;
#N canvas 126 -975 297 579 count128 0;
#X obj 85 256 until;
#X obj 85 339 f;
#X obj 134 276 + 1;
#X obj 85 220 t f f;
#X floatatom 85 193 5 0 0 0 - - - 0;
#X floatatom 85 398 5 0 0 0 - - - 0;
#X obj 85 437 outlet;
#X obj 85 86 r redraw2;
#X obj 134 301 mod 128;
#X msg 85 154 128;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 5 0;
#X connect 2 0 8 0;
#X connect 3 0 0 0;
#X connect 3 1 8 1;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 7 0 9 0;
#X connect 8 0 1 1;
#X connect 9 0 4 0;
#X restore 496 194 pd count128;
#X obj 66 381 ftom;
#X obj 256 381 ftom;
#X floatatom 168 680 6 0 0 0 - - - 0;
#X floatatom 286 680 6 0 0 0 - - - 0;
#X floatatom 227 680 6 0 0 0 - - - 0;
#X floatatom 345 680 6 0 0 0 - - - 0;
#X text 171 663 Hz;
#X text 289 664 Hz;
#X text 230 662 dB;
#X text 348 663 dB;
#N canvas 780 23 1268 771 makelist 0;
#X obj 403 333 t b f;
#X obj 318 333 t b f;
#X obj 489 333 t b f;
#X obj 265 456 list prepend harmthresh;
#X obj 265 381 pack f 0 f 0, f 37;
#X obj 264 67 inlet;
#X obj 318 67 inlet;
#X obj 403 67 inlet;
#X obj 489 67 inlet;
#X obj 265 505 outlet;
#X obj 122 170 inlet;
#X obj 122 200 t b f;
#X obj 569 290 sel 0 1;
#X msg 569 378 symbol harmthresh;
#X msg 592 356 symbol percthresh;
#X obj 264 163 expr $f1/(samplerate/2), f 25;
#X obj 403 190 expr $f1/(samplerate/2), f 25;
#X connect 0 0 4 0;
#X connect 0 1 4 2;
#X connect 1 0 4 0;
#X connect 1 1 4 1;
#X connect 2 0 4 0;
#X connect 2 1 4 3;
#X connect 3 0 9 0;
#X connect 4 0 3 0;
#X connect 5 0 15 0;
#X connect 6 0 1 0;
#X connect 7 0 16 0;
#X connect 8 0 2 0;
#X connect 10 0 11 0;
#X connect 11 0 4 0;
#X connect 11 1 12 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 13 0 3 1;
#X connect 14 0 3 1;
#X connect 15 0 4 0;
#X connect 16 0 0 0;
#X restore 110 714 pd makelist;
#X f 34;
#X obj 111 677 vradio 15 1 0 2 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0;
#X text 34 689 percthresh;
#X text 34 677 harmthresh;
#X obj 110 789 outlet;
#X msg -9 36 \; help.hpss.mode.2.a edit 0;
#X obj 250 313 t b f;
#X obj 205 313 t b f;
#X obj 140 313 t b f;
#X obj 95 313 t b f;
#X connect 0 0 28 0;
#X connect 0 0 29 0;
#X connect 1 0 30 0;
#X connect 1 0 31 0;
#X connect 4 0 32 0;
#X connect 4 0 33 0;
#X connect 5 0 34 0;
#X connect 5 0 35 0;
#X connect 9 0 10 0;
#X connect 9 1 42 1;
#X connect 10 0 12 0;
#X connect 10 1 11 0;
#X connect 11 0 38 0;
#X connect 11 1 13 0;
#X connect 12 0 36 0;
#X connect 13 0 37 0;
#X connect 14 0 42 0;
#X connect 15 0 63 0;
#X connect 16 0 62 0;
#X connect 17 0 61 0;
#X connect 18 0 60 0;
#X connect 19 0 20 0;
#X connect 19 0 21 0;
#X connect 19 0 59 0;
#X connect 20 0 15 0;
#X connect 21 0 17 0;
#X connect 36 0 42 0;
#X connect 37 0 42 0;
#X connect 38 0 14 0;
#X connect 39 0 11 1;
#X connect 40 0 10 1;
#X connect 43 0 9 0;
#X connect 44 0 0 0;
#X connect 45 0 4 0;
#X connect 46 0 54 1;
#X connect 47 0 54 3;
#X connect 48 0 54 2;
#X connect 49 0 54 4;
#X connect 54 0 58 0;
#X connect 55 0 54 0;
#X connect 60 0 41 0;
#X connect 60 1 5 0;
#X connect 60 1 49 0;
#X connect 61 0 41 0;
#X connect 61 1 45 0;
#X connect 61 1 47 0;
#X connect 62 0 41 0;
#X connect 62 1 1 0;
#X connect 62 1 48 0;
#X connect 63 0 41 0;
#X connect 63 1 44 0;
#X connect 63 1 46 0;
#X coords 0 -1 1 1 200 200 2 100 100;
#X restore 58 373 pd calculatethreshold;
#N canvas 931 23 1117 788 calculatethreshold 0;
#X floatatom 66 435 5 0 0 0 - - - 0;
#X floatatom 166 381 5 0 0 0 - - - 0;
#X text 104 434 nf1;
#X text 204 380 a1;
#X floatatom 256 435 5 0 0 0 - - - 0;
#X floatatom 356 379 5 0 0 0 - - - 0;
#X text 295 434 nf2;
#X text 402 380 a2;
#N canvas 0 22 450 278 (subpatch) 0;
#X array help.hpss.mode.2.b 128 float 0;
#X coords 0 60 127 -60 200 140 2 0 0;
#X restore 100 100 graph;
#X obj 496 223 t f f, f 71;
#X obj 496 285 moses;
#X obj 897 325 moses;
#X obj 496 484 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 929 484 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X floatatom 581 509 5 0 0 0 - - - 0;
#X floatatom 106 277 5 0 20000 1 - - - 12;
#X floatatom 146 277 5 -50 50 1 - - - 12;
#X floatatom 216 277 5 0 20000 1 - - - 12;
#X floatatom 256 277 5 -50 50 1 - - - 12;
#X obj -37 131 loadbang;
#X msg -37 182 112.47;
#X msg 19 182 3556.56;
#X text 214 243 highershelf;
#X text 254 261 dB;
#X text 214 261 Hz;
#X text 144 261 dB;
#X text 104 261 Hz;
#X text 102 243 lower shelf;
#X obj 496 575 tabwrite help.hpss.mode.2.b, f 71;
#X obj 98 479 s nf001;
#X obj 70 500 value nf001;
#X obj 173 500 value a001;
#X obj 202 479 s a001;
#X obj 294 479 s nf002;
#X obj 266 500 value nf002;
#X obj 363 500 value a002;
#X obj 391 479 s a002;
#X obj 528 254 r nf001;
#X obj 929 297 r nf002;
#X obj 496 509 value a001;
#X obj 928 509 value a002;
#X obj -9 351 s redraw3;
#X obj 581 460 expr a001+(($f1-nf001)*((a002-a001)/(nf002-nf001)));
#N canvas 126 -975 297 579 count128 0;
#X obj 85 256 until;
#X obj 85 339 f;
#X obj 134 276 + 1;
#X obj 85 220 t f f;
#X floatatom 85 193 5 0 0 0 - - - 0;
#X floatatom 85 398 5 0 0 0 - - - 0;
#X obj 85 437 outlet;
#X obj 85 86 r redraw3;
#X msg 85 154 128;
#X obj 134 301 mod 128;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 5 0;
#X connect 2 0 9 0;
#X connect 3 0 0 0;
#X connect 3 1 9 1;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 7 0 8 0;
#X connect 8 0 4 0;
#X connect 9 0 1 1;
#X restore 496 194 pd count128;
#X obj 66 381 ftom;
#X obj 256 381 ftom;
#X floatatom 168 680 6 0 0 0 - - - 0;
#X floatatom 286 680 6 0 0 0 - - - 0;
#X floatatom 227 680 6 0 0 0 - - - 0;
#X floatatom 345 680 6 0 0 0 - - - 0;
#X text 171 663 Hz;
#X text 289 664 Hz;
#X text 230 662 dB;
#X text 348 663 dB;
#N canvas 780 23 1268 771 makelist 0;
#X obj 403 333 t b f;
#X obj 318 333 t b f;
#X obj 489 333 t b f;
#X obj 265 456 list prepend harmthresh;
#X obj 265 381 pack f 0 f 0, f 37;
#X obj 264 67 inlet;
#X obj 318 67 inlet;
#X obj 403 67 inlet;
#X obj 489 67 inlet;
#X obj 265 505 outlet;
#X obj 122 170 inlet;
#X obj 122 200 t b f;
#X obj 569 290 sel 0 1;
#X msg 569 378 symbol harmthresh;
#X msg 592 356 symbol percthresh;
#X obj 264 163 expr $f1/(samplerate/2), f 25;
#X obj 403 190 expr $f1/(samplerate/2), f 25;
#X connect 0 0 4 0;
#X connect 0 1 4 2;
#X connect 1 0 4 0;
#X connect 1 1 4 1;
#X connect 2 0 4 0;
#X connect 2 1 4 3;
#X connect 3 0 9 0;
#X connect 4 0 3 0;
#X connect 5 0 15 0;
#X connect 6 0 1 0;
#X connect 7 0 16 0;
#X connect 8 0 2 0;
#X connect 10 0 11 0;
#X connect 11 0 4 0;
#X connect 11 1 12 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 13 0 3 1;
#X connect 14 0 3 1;
#X connect 15 0 4 0;
#X connect 16 0 0 0;
#X restore 110 714 pd makelist;
#X f 34;
#X obj 111 677 vradio 15 1 0 2 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0;
#X text 34 689 percthresh;
#X text 34 677 harmthresh;
#X obj 110 752 outlet;
#X msg 2 44 \; help.hpss.mode.2.b edit 0;
#X obj 101 309 t b f;
#X obj 148 309 t b f;
#X obj 211 309 t b f;
#X obj 258 309 t b f;
#X connect 0 0 29 0;
#X connect 0 0 30 0;
#X connect 1 0 31 0;
#X connect 1 0 32 0;
#X connect 4 0 33 0;
#X connect 4 0 34 0;
#X connect 5 0 35 0;
#X connect 5 0 36 0;
#X connect 9 0 10 0;
#X connect 9 1 28 1;
#X connect 10 0 12 0;
#X connect 10 1 11 0;
#X connect 11 0 42 0;
#X connect 11 1 13 0;
#X connect 12 0 39 0;
#X connect 13 0 40 0;
#X connect 14 0 28 0;
#X connect 15 0 60 0;
#X connect 16 0 61 0;
#X connect 17 0 62 0;
#X connect 18 0 63 0;
#X connect 19 0 20 0;
#X connect 19 0 21 0;
#X connect 19 0 59 0;
#X connect 20 0 15 0;
#X connect 21 0 17 0;
#X connect 37 0 10 1;
#X connect 38 0 11 1;
#X connect 39 0 28 0;
#X connect 40 0 28 0;
#X connect 42 0 14 0;
#X connect 43 0 9 0;
#X connect 44 0 0 0;
#X connect 45 0 4 0;
#X connect 46 0 54 1;
#X connect 47 0 54 3;
#X connect 48 0 54 2;
#X connect 49 0 54 4;
#X connect 54 0 58 0;
#X connect 55 0 54 0;
#X connect 60 0 41 0;
#X connect 60 1 44 0;
#X connect 60 1 46 0;
#X connect 61 0 41 0;
#X connect 61 1 1 0;
#X connect 61 1 48 0;
#X connect 62 0 41 0;
#X connect 62 1 45 0;
#X connect 62 1 47 0;
#X connect 63 0 41 0;
#X connect 63 1 5 0;
#X connect 63 1 49 0;
#X coords 0 -1 1 1 200 200 2 100 100;
#X restore 355 373 pd calculatethreshold;
#X obj 57 696 list trim;
#X listbox 65 580 38 0 0 0 - - - 0;
#X listbox 355 580 38 0 0 0 - - - 0;
#X text 302 771 residual;
#X floatatom 332 655 6 0 0 0 - - - 0;
#X floatatom 450 655 6 0 0 0 - - - 0;
#X floatatom 391 655 6 0 0 0 - - - 0;
#X floatatom 509 655 6 0 0 0 - - - 0;
#X text 335 638 Hz;
#X text 453 639 Hz;
#X text 394 637 dB;
#X text 512 638 dB;
#X listbox 284 711 41 0 0 0 - - - 0;
#N canvas 780 23 1268 771 makelist 0;
#X obj 403 333 t b f;
#X obj 318 333 t b f;
#X obj 489 333 t b f;
#X obj 265 456 list prepend harmthresh;
#X obj 265 381 pack f 0 f 0, f 37;
#X obj 264 67 inlet;
#X obj 318 67 inlet;
#X obj 403 67 inlet;
#X obj 489 67 inlet;
#X obj 265 505 outlet;
#X obj 122 170 inlet;
#X obj 122 200 t b f;
#X obj 569 290 sel 0 1;
#X msg 569 378 symbol harmthresh;
#X msg 592 356 symbol percthresh;
#X obj 264 163 expr $f1/(samplerate/2), f 25;
#X obj 403 190 expr $f1/(samplerate/2), f 25;
#X connect 0 0 4 0;
#X connect 0 1 4 2;
#X connect 1 0 4 0;
#X connect 1 1 4 1;
#X connect 2 0 4 0;
#X connect 2 1 4 3;
#X connect 3 0 9 0;
#X connect 4 0 3 0;
#X connect 5 0 15 0;
#X connect 6 0 1 0;
#X connect 7 0 16 0;
#X connect 8 0 2 0;
#X connect 10 0 11 0;
#X connect 11 0 4 0;
#X connect 11 1 12 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 13 0 3 1;
#X connect 14 0 3 1;
#X connect 15 0 4 0;
#X connect 16 0 0 0;
#X restore 274 689 pd makelist;
#X f 34;
#X obj 275 652 vradio 15 1 0 2 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0;
#X text 198 664 percthresh;
#X text 198 652 harmthresh;
#X text 15 95 In mode 0 \, fluid.hpss~ uses a soft-masking approach that produces smooth results \, at the cost of how separated they are. In modes 1 and 2 \, a binary mask is used instead (see mode 1 subpatch), f 94;
#X text 15 74 Use mode 2 for more extreme separation and fine-tuning;
#X text 15 140 In mode 2 \, the harmonic and percussive masks use separate thresholds. This means that two components are no longer guaranteed to sum to the source \, and so the residual buffer contains any leftovers. With some patient experimentation \, one can sometimes manage to place noisier material in the residual \, with tonal / persussive material in the other two channels., f 94;
#X obj 90 900 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X text 90 898 1) Turn audio on;
#X obj 346 796 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X text 346 794 3) Select which components to hear;
#X text 17 229 2) Play a sound;
#X connect 3 0 11 0;
#X connect 5 0 2 0;
#X connect 5 0 2 1;
#X connect 6 0 5 1;
#X connect 7 0 2 0;
#X connect 7 0 2 1;
#X connect 8 0 7 1;
#X connect 11 0 5 0;
#X connect 11 1 7 0;
#X connect 11 2 12 0;
#X connect 12 0 2 0;
#X connect 12 0 2 1;
#X connect 13 0 12 1;
#X connect 14 0 17 0;
#X connect 14 0 16 0;
#X connect 15 0 18 0;
#X connect 15 0 16 0;
#X connect 16 0 11 0;
#X connect 20 0 29 1;
#X connect 21 0 29 3;
#X connect 22 0 29 2;
#X connect 23 0 29 4;
#X connect 29 0 28 0;
#X connect 29 0 16 0;
#X connect 30 0 29 0;
#X restore 526 909 pd masking_mode2;
#X obj 97 961 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X text 97 959 1) Turn audio on;
#X msg 395 374 3;
#X msg 395 493 31;
#N canvas 593 672 450 300 getsr 0;
#X obj 55 87 r pd-dsp-started;
#X obj 55 112 samplerate~;
#X obj 114 168 value samplerate;
#X obj 182 76 loadbang;
#X obj 55 136 t b f;
#X obj 36 172 outlet;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 4 1 2 0;
#X restore 139 372 pd getsr;
#X text 33 779 3) Select which components to hear:;
#X connect 8 0 18 1;
#X connect 8 0 18 0;
#X connect 9 0 8 1;
#X connect 10 0 18 1;
#X connect 10 0 18 0;
#X connect 11 0 10 1;
#X connect 12 0 17 0;
#X connect 12 0 39 0;
#X connect 12 0 40 0;
#X connect 13 0 23 0;
#X connect 14 0 13 0;
#X connect 15 0 16 0;
#X connect 16 0 23 0;
#X connect 17 0 23 0;
#X connect 19 0 23 0;
#X connect 19 0 28 0;
#X connect 23 0 8 0;
#X connect 23 1 10 0;
#X connect 23 3 26 0;
#X connect 24 0 29 0;
#X connect 25 0 24 0;
#X connect 26 0 25 0;
#X connect 29 0 18 0;
#X connect 29 0 18 1;
#X connect 30 0 29 1;
#X connect 32 0 23 0;
#X connect 39 0 14 0;
#X connect 40 0 15 0;
#X connect 41 0 32 0;
